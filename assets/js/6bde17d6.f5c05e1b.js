"use strict";(globalThis.webpackChunkmy_docs=globalThis.webpackChunkmy_docs||[]).push([[9240],{1190:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>c,frontMatter:()=>a,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"others/ADD_AUTHORIZED_PROGRAMS_GUIDE","title":"How to Add Authorized Programs","description":"This guide explains how to add Position Manager and Liquidation Engine to the authorized programs list.","source":"@site/docs/others/ADD_AUTHORIZED_PROGRAMS_GUIDE.md","sourceDirName":"others","slug":"/others/ADD_AUTHORIZED_PROGRAMS_GUIDE","permalink":"/GoQuant-Project/docs/others/ADD_AUTHORIZED_PROGRAMS_GUIDE","draft":false,"unlisted":false,"editUrl":"https://github.com/sahilgoswami0901/GoQuant-Project/tree/main/docs/others/ADD_AUTHORIZED_PROGRAMS_GUIDE.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"\ud83d\udcb0 USDT Acquisition Guide","permalink":"/GoQuant-Project/docs/getting-started/USDT_ACQUISITION_GUIDE"},"next":{"title":"SOL Transfer Guide","permalink":"/GoQuant-Project/docs/others/SOL_TRANSFER_GUIDE"}}');var t=i(4848),r=i(8453);const a={},o="How to Add Authorized Programs",d={},l=[{value:"\u2705 <strong>Recommended: Add During Test Setup</strong>",id:"-recommended-add-during-test-setup",level:2},{value:"<strong>Step 1: Create the Keypairs</strong>",id:"step-1-create-the-keypairs",level:3},{value:"<strong>Step 2: Run Your Tests</strong>",id:"step-2-run-your-tests",level:3},{value:"\ud83d\udd27 <strong>Alternative: Manual Addition via API</strong>",id:"-alternative-manual-addition-via-api",level:2},{value:"<strong>Endpoint:</strong>",id:"endpoint",level:3},{value:"<strong>Request:</strong>",id:"request",level:3},{value:"\ud83d\udccb <strong>Step-by-Step Process</strong>",id:"-step-by-step-process",level:2},{value:"<strong>1. Find Your Admin Address</strong>",id:"1-find-your-admin-address",level:3},{value:"<strong>2. Get Position Manager &amp; Liquidation Engine Addresses</strong>",id:"2-get-position-manager--liquidation-engine-addresses",level:3},{value:"<strong>3. Add Them via Test (Recommended)</strong>",id:"3-add-them-via-test-recommended",level:3},{value:"<strong>4. Verify They&#39;re Added</strong>",id:"4-verify-theyre-added",level:3},{value:"\ud83c\udfaf <strong>What Happens</strong>",id:"-what-happens",level:2},{value:"\u26a0\ufe0f <strong>Important Notes</strong>",id:"\ufe0f-important-notes",level:2},{value:"\ud83d\ude80 <strong>Quick Start</strong>",id:"-quick-start",level:2}];function h(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"how-to-add-authorized-programs",children:"How to Add Authorized Programs"})}),"\n",(0,t.jsx)(n.p,{children:"This guide explains how to add Position Manager and Liquidation Engine to the authorized programs list."}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsxs)(n.h2,{id:"-recommended-add-during-test-setup",children:["\u2705 ",(0,t.jsx)(n.strong,{children:"Recommended: Add During Test Setup"})]}),"\n",(0,t.jsxs)(n.p,{children:["The easiest way is to add them automatically when running your devnet tests. The test file (",(0,t.jsx)(n.code,{children:"tests/devnet-test.ts"}),") has been updated to automatically add authorized programs if the keypairs exist."]}),"\n",(0,t.jsx)(n.h3,{id:"step-1-create-the-keypairs",children:(0,t.jsx)(n.strong,{children:"Step 1: Create the Keypairs"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Create Position Manager keypair\nsolana-keygen new \\\n  --outfile ~/.config/solana/position-manager.json \\\n  --no-bip39-passphrase\n\n# Create Liquidation Engine keypair\nsolana-keygen new \\\n  --outfile ~/.config/solana/liquidation-engine.json \\\n  --no-bip39-passphrase\n\n# Fund them (devnet)\nsolana airdrop 1 ~/.config/solana/position-manager.json\nsolana airdrop 1 ~/.config/solana/liquidation-engine.json\n"})}),"\n",(0,t.jsx)(n.h3,{id:"step-2-run-your-tests",children:(0,t.jsx)(n.strong,{children:"Step 2: Run Your Tests"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cd collateral-vault\nanchor test --provider.cluster devnet --skip-deploy\n"})}),"\n",(0,t.jsx)(n.p,{children:"The test will:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Initialize Vault Authority (if not already initialized)"}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Automatically add Position Manager"})," (if keypair exists)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Automatically add Liquidation Engine"})," (if keypair exists)"]}),"\n",(0,t.jsx)(n.li,{children:"Display the final authorized programs list"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Output:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Initializing vault authority...\n\u2713 Vault authority initialized!\n\nAdding authorized programs...\n\u2713 Found Position Manager: 7xKt9Fj2abc123...\n\u2713 Found Liquidation Engine: 9Yht3Mkxyz789...\n\u2713 Added Position Manager as authorized program\n  Transaction: 5Ht3Rjabc123...\n\u2713 Added Liquidation Engine as authorized program\n  Transaction: 5Ht3Rjdef456...\n\n\ud83d\udccb Authorized Programs List:\n  1. 7xKt9Fj2abc123...  (Position Manager)\n  2. 9Yht3Mkxyz789...  (Liquidation Engine)\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsxs)(n.h2,{id:"-alternative-manual-addition-via-api",children:["\ud83d\udd27 ",(0,t.jsx)(n.strong,{children:"Alternative: Manual Addition via API"})]}),"\n",(0,t.jsx)(n.p,{children:"If you prefer to add them manually or after the fact, you can use the API endpoint:"}),"\n",(0,t.jsx)(n.h3,{id:"endpoint",children:(0,t.jsx)(n.strong,{children:"Endpoint:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"POST /vault/add-authorized-program\n"})}),"\n",(0,t.jsx)(n.h3,{id:"request",children:(0,t.jsx)(n.strong,{children:"Request:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'curl -X POST http://127.0.0.1:8080/vault/add-authorized-program \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "programId": "POSITION_MANAGER_PUBKEY",\n    "adminKeypairPath": "~/.config/solana/id.json"\n  }\'\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note:"})," The ",(0,t.jsx)(n.code,{children:"adminKeypairPath"})," must point to the keypair that initialized VaultAuthority (usually your deployer wallet)."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsxs)(n.h2,{id:"-step-by-step-process",children:["\ud83d\udccb ",(0,t.jsx)(n.strong,{children:"Step-by-Step Process"})]}),"\n",(0,t.jsx)(n.h3,{id:"1-find-your-admin-address",children:(0,t.jsx)(n.strong,{children:"1. Find Your Admin Address"})}),"\n",(0,t.jsxs)(n.p,{children:["The admin is whoever called ",(0,t.jsx)(n.code,{children:"initialize_vault_authority"}),". Usually this is your deployer wallet:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Check your current wallet (likely the admin)\nsolana address\n\n# Or check the deployer wallet\nsolana address -k ~/.config/solana/id.json\n"})}),"\n",(0,t.jsx)(n.h3,{id:"2-get-position-manager--liquidation-engine-addresses",children:(0,t.jsx)(n.strong,{children:"2. Get Position Manager & Liquidation Engine Addresses"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Position Manager\nsolana address -k ~/.config/solana/position-manager.json\n\n# Liquidation Engine\nsolana address -k ~/.config/solana/liquidation-engine.json\n"})}),"\n",(0,t.jsx)(n.h3,{id:"3-add-them-via-test-recommended",children:(0,t.jsx)(n.strong,{children:"3. Add Them via Test (Recommended)"})}),"\n",(0,t.jsx)(n.p,{children:"Just run your tests - they'll be added automatically if the keypairs exist!"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"anchor test --provider.cluster devnet --skip-deploy\n"})}),"\n",(0,t.jsx)(n.h3,{id:"4-verify-theyre-added",children:(0,t.jsx)(n.strong,{children:"4. Verify They're Added"})}),"\n",(0,t.jsx)(n.p,{children:"Check the test output or query the VaultAuthority account:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:'const authority = await program.account.vaultAuthority.fetch(vaultAuthorityPda);\nconsole.log("Authorized Programs:", authority.authorizedPrograms.map(p => p.toBase58()));\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsxs)(n.h2,{id:"-what-happens",children:["\ud83c\udfaf ",(0,t.jsx)(n.strong,{children:"What Happens"})]}),"\n",(0,t.jsx)(n.p,{children:"When you run the test:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Test checks if keypairs exist"})," \u2192 If yes, loads them"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Test checks if already authorized"})," \u2192 Skips if already added"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsxs)(n.strong,{children:["Test calls ",(0,t.jsx)(n.code,{children:"add_authorized_program"})]})," \u2192 Adds to the list"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Test verifies"})," \u2192 Confirms they're in the authorized list"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsxs)(n.h2,{id:"\ufe0f-important-notes",children:["\u26a0\ufe0f ",(0,t.jsx)(n.strong,{children:"Important Notes"})]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Admin Only"}),": Only the admin (who initialized VaultAuthority) can add programs"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Keypair Location"}),": Keypairs must be at:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"~/.config/solana/position-manager.json"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"~/.config/solana/liquidation-engine.json"})}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"One-Time Setup"}),": Once added, they stay authorized (unless removed)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Maximum 10"}),": The VaultAuthority can hold up to 10 authorized programs"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsxs)(n.h2,{id:"-quick-start",children:["\ud83d\ude80 ",(0,t.jsx)(n.strong,{children:"Quick Start"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# 1. Create keypairs\nsolana-keygen new --outfile ~/.config/solana/position-manager.json --no-bip39-passphrase\nsolana-keygen new --outfile ~/.config/solana/liquidation-engine.json --no-bip39-passphrase\n\n# 2. Fund them\nsolana airdrop 1 ~/.config/solana/position-manager.json\nsolana airdrop 1 ~/.config/solana/liquidation-engine.json\n\n# 3. Run tests (they'll be added automatically)\nanchor test --provider.cluster devnet --skip-deploy\n"})}),"\n",(0,t.jsx)(n.p,{children:"That's it! The authorized programs will be added automatically when you run your tests. \ud83c\udf89"})]})}function c(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>a,x:()=>o});var s=i(6540);const t={},r=s.createContext(t);function a(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);