"use strict";(globalThis.webpackChunkmy_docs=globalThis.webpackChunkmy_docs||[]).push([[7429],{299:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>i,contentTitle:()=>a,default:()=>h,frontMatter:()=>s,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"others/UPGRADE_AUTHORITY_FIX","title":"Fix: Program Authority Mismatch","description":"\ud83d\udd34 Error","source":"@site/docs/others/UPGRADE_AUTHORITY_FIX.md","sourceDirName":"others","slug":"/others/UPGRADE_AUTHORITY_FIX","permalink":"/GoQuant-Project/docs/others/UPGRADE_AUTHORITY_FIX","draft":false,"unlisted":false,"editUrl":"https://github.com/sahilgoswami0901/GoQuant-Project/tree/main/docs/others/UPGRADE_AUTHORITY_FIX.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"SOL Transfer Guide","permalink":"/GoQuant-Project/docs/others/SOL_TRANSFER_GUIDE"},"next":{"title":"\ud83d\udd10 Solana Wallet Management Guide","permalink":"/GoQuant-Project/docs/others/WALLET_MANAGEMENT"}}');var t=r(4848),l=r(8453);const s={},a="Fix: Program Authority Mismatch",i={},c=[{value:"\ud83d\udd34 Error",id:"-error",level:2},{value:"\ud83d\udccb What This Means",id:"-what-this-means",level:2},{value:"\u2705 Solutions",id:"-solutions",level:2},{value:"<strong>Solution 1: Use Original Wallet for Deployment (Easiest)</strong>",id:"solution-1-use-original-wallet-for-deployment-easiest",level:3},{value:"<strong>Solution 2: Transfer Upgrade Authority</strong>",id:"solution-2-transfer-upgrade-authority",level:3},{value:"<strong>Solution 3: Deploy New Program (Fresh Start)</strong>",id:"solution-3-deploy-new-program-fresh-start",level:3},{value:"\ud83c\udfaf Recommended Approach",id:"-recommended-approach",level:2},{value:"\ud83d\udd0d Check Current Authority",id:"-check-current-authority",level:2},{value:"\ud83d\udca1 Quick Fix Command",id:"-quick-fix-command",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"fix-program-authority-mismatch",children:"Fix: Program Authority Mismatch"})}),"\n",(0,t.jsx)(n.h2,{id:"-error",children:"\ud83d\udd34 Error"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Error: Program's authority Some(HjxQC5jmM8JQrKmVLz29fvaVU428BQ3NzM7a3uQECt9m) \ndoes not match authority provided 5cGSnAXuUBvm6gbAnEhUjy54m6REqrfP5Z6K99tuF6mZ\n"})}),"\n",(0,t.jsx)(n.h2,{id:"-what-this-means",children:"\ud83d\udccb What This Means"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Original Upgrade Authority"}),": ",(0,t.jsx)(n.code,{children:"HjxQC5jmM8JQrKmVLz29fvaVU428BQ3NzM7a3uQECt9m"})," (wallet2.json)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Current Deployer"}),": ",(0,t.jsx)(n.code,{children:"5cGSnAXuUBvm6gbAnEhUjy54m6REqrfP5Z6K99tuF6mZ"})," (id.json)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Problem"}),": You can't upgrade a program unless you're the upgrade authority"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-solutions",children:"\u2705 Solutions"}),"\n",(0,t.jsx)(n.h3,{id:"solution-1-use-original-wallet-for-deployment-easiest",children:(0,t.jsx)(n.strong,{children:"Solution 1: Use Original Wallet for Deployment (Easiest)"})}),"\n",(0,t.jsxs)(n.p,{children:["If you have access to ",(0,t.jsx)(n.code,{children:"wallet2.json"}),", use it for deployments:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# Option A: Temporarily set wallet2.json as default\nsolana config set --keypair ~/.config/solana/wallet2.json\n\n# Then deploy\nanchor deploy --provider.cluster devnet\n\n# Option B: Specify wallet in Anchor.toml\n# Edit Anchor.toml:\n[provider]\nwallet = "~/.config/solana/wallet2.json"  # Use original wallet\n\n# Then deploy\nanchor deploy --provider.cluster devnet\n'})}),"\n",(0,t.jsx)(n.h3,{id:"solution-2-transfer-upgrade-authority",children:(0,t.jsx)(n.strong,{children:"Solution 2: Transfer Upgrade Authority"})}),"\n",(0,t.jsx)(n.p,{children:"If you have access to the original wallet, transfer authority to the new wallet:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Transfer upgrade authority from old wallet to new wallet\nsolana program set-upgrade-authority cYT3s7FH9R6AViiHeB9uFd4ruwtdnyHQFQyc27oDmAS \\\n  --new-upgrade-authority 5cGSnAXuUBvm6gbAnEhUjy54m6REqrfP5Z6K99tuF6mZ \\\n  --keypair ~/.config/solana/wallet2.json \\\n  --url devnet\n\n# Then you can deploy with the new wallet\nanchor deploy --provider.cluster devnet\n"})}),"\n",(0,t.jsx)(n.h3,{id:"solution-3-deploy-new-program-fresh-start",children:(0,t.jsx)(n.strong,{children:"Solution 3: Deploy New Program (Fresh Start)"})}),"\n",(0,t.jsx)(n.p,{children:"If you want to start completely fresh with the new wallet:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# 1. Generate new program keypair\nsolana-keygen new \\\n  --outfile target/deploy/collateral_vault-keypair.json \\\n  --no-bip39-passphrase\n\n# 2. Get new program ID\nNEW_PROGRAM_ID=$(solana address -k target/deploy/collateral_vault-keypair.json)\necho "New Program ID: $NEW_PROGRAM_ID"\n\n# 3. Update lib.rs\n# Edit programs/collateral-vault/src/lib.rs:\n# declare_id!("$NEW_PROGRAM_ID");\n\n# 4. Sync Anchor config\nanchor keys sync\n\n# 5. Build and deploy\nanchor build\nanchor deploy --provider.cluster devnet\n\n# 6. Update backend .env\n# VAULT_PROGRAM_ID=$NEW_PROGRAM_ID\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-recommended-approach",children:"\ud83c\udfaf Recommended Approach"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsxs)(n.strong,{children:["If you have access to ",(0,t.jsx)(n.code,{children:"wallet2.json"}),":"]})}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Quick fix"}),": Use wallet2.json for deployments"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# Update Anchor.toml\n[provider]\nwallet = "~/.config/solana/wallet2.json"\n'})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Better long-term"}),": Transfer authority to new wallet"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"solana program set-upgrade-authority cYT3s7FH9R6AViiHeB9uFd4ruwtdnyHQFQyc27oDmAS \\\n  --new-upgrade-authority 5cGSnAXuUBvm6gbAnEhUjy54m6REqrfP5Z6K99tuF6mZ \\\n  --keypair ~/.config/solana/wallet2.json \\\n  --url devnet\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsxs)(n.strong,{children:["If you DON'T have access to ",(0,t.jsx)(n.code,{children:"wallet2.json"}),":"]})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"You'll need to deploy a new program (Solution 3)"}),"\n",(0,t.jsx)(n.li,{children:"This means losing access to existing vaults/data tied to the old program"}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-check-current-authority",children:"\ud83d\udd0d Check Current Authority"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Check who owns the program\nsolana program show cYT3s7FH9R6AViiHeB9uFd4ruwtdnyHQFQyc27oDmAS --url devnet\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-quick-fix-command",children:"\ud83d\udca1 Quick Fix Command"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Use the original wallet for this deployment:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Temporarily use wallet2.json\nanchor deploy --provider.cluster devnet --provider.wallet ~/.config/solana/wallet2.json\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Or update ",(0,t.jsx)(n.code,{children:"Anchor.toml"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-toml",children:'[provider]\nwallet = "~/.config/solana/wallet2.json"  # Use original wallet\n'})})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>s,x:()=>a});var o=r(6540);const t={},l=o.createContext(t);function s(e){const n=o.useContext(l);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),o.createElement(l.Provider,{value:n},e.children)}}}]);