"use strict";(globalThis.webpackChunkmy_docs=globalThis.webpackChunkmy_docs||[]).push([[5451],{3958:(e,n,l)=>{l.r(n),l.d(n,{assets:()=>d,contentTitle:()=>i,default:()=>h,frontMatter:()=>a,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"backend/BACKEND_SETUP","title":"\ud83d\ude80 Backend Setup & Running Guide","description":"Complete guide to set up and run the Collateral Vault backend with real-time monitoring.","source":"@site/docs/backend/BACKEND_SETUP.md","sourceDirName":"backend","slug":"/backend/BACKEND_SETUP","permalink":"/GoQuant-Project/docs/backend/BACKEND_SETUP","draft":false,"unlisted":false,"editUrl":"https://github.com/sahilgoswami0901/GoQuant-Project/tree/main/docs/backend/BACKEND_SETUP.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Collateral Vault API Commands","permalink":"/GoQuant-Project/docs/backend/API_COMMANDS"},"next":{"title":"WebSocket Real-Time Updates Guide","permalink":"/GoQuant-Project/docs/backend/WEBSOCKET_GUIDE"}}');var t=l(4848),r=l(8453);const a={},i="\ud83d\ude80 Backend Setup & Running Guide",d={},c=[{value:"\ud83d\udccb Prerequisites",id:"-prerequisites",level:2},{value:"\ud83d\uddc4\ufe0f Step 1: Setup Database",id:"\ufe0f-step-1-setup-database",level:2},{value:"\u2699\ufe0f Step 2: Configure Environment",id:"\ufe0f-step-2-configure-environment",level:2},{value:"\ud83c\udfc3 Step 3: Run the Backend",id:"-step-3-run-the-backend",level:2},{value:"\ud83e\uddea Step 4: Test the API",id:"-step-4-test-the-api",level:2},{value:"Health Check",id:"health-check",level:3},{value:"Get Vault Balance",id:"get-vault-balance",level:3},{value:"Get TVL",id:"get-tvl",level:3},{value:"\ud83d\udcca Step 5: Run the Dashboard",id:"-step-5-run-the-dashboard",level:2},{value:"Install Dashboard Dependencies",id:"install-dashboard-dependencies",level:3},{value:"Start Streamlit Dashboard",id:"start-streamlit-dashboard",level:3},{value:"\ud83d\udd0d Available API Endpoints",id:"-available-api-endpoints",level:2},{value:"\ud83d\udc1b Troubleshooting",id:"-troubleshooting",level:2},{value:"Backend won&#39;t start",id:"backend-wont-start",level:3},{value:"Dashboard shows &quot;Backend Offline&quot;",id:"dashboard-shows-backend-offline",level:3},{value:"\ud83d\udcc8 Real-time Monitoring",id:"-real-time-monitoring",level:2},{value:"\ud83d\udd04 Background Services",id:"-background-services",level:2},{value:"\ud83d\udcdd Next Steps",id:"-next-steps",level:2},{value:"\ud83c\udd98 Need Help?",id:"-need-help",level:2}];function o(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"-backend-setup--running-guide",children:"\ud83d\ude80 Backend Setup & Running Guide"})}),"\n",(0,t.jsx)(n.p,{children:"Complete guide to set up and run the Collateral Vault backend with real-time monitoring."}),"\n",(0,t.jsx)(n.h2,{id:"-prerequisites",children:"\ud83d\udccb Prerequisites"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"PostgreSQL"})," (via Docker)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Rust & Cargo"})," installed"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Solana CLI"})," installed"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Program deployed"})," to devnet/localnet"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"\ufe0f-step-1-setup-database",children:"\ud83d\uddc4\ufe0f Step 1: Setup Database"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Start PostgreSQL container\ndocker run -d \\\n  --name collateral-vault-db \\\n  -p 5432:5432 \\\n  -e POSTGRES_USER=postgres \\\n  -e POSTGRES_PASSWORD=password \\\n  -e POSTGRES_DB=collateral_vault \\\n  -v collateral_vault_data:/var/lib/postgresql/data \\\n  postgres:15\n\n# Wait for it to start\nsleep 5\n\n# Run migrations\ndocker exec -i collateral-vault-db psql -U postgres -d collateral_vault < backend/migrations/001_initial_schema.sql\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"\ufe0f-step-2-configure-environment",children:"\u2699\ufe0f Step 2: Configure Environment"}),"\n",(0,t.jsxs)(n.p,{children:["Make sure your ",(0,t.jsx)(n.code,{children:"backend/.env"})," file is set up:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-env",children:"# Database\nDATABASE_URL=postgres://postgres:password@localhost:5432/collateral_vault\n\n# Solana (Devnet)\nSOLANA_RPC_URL=https://api.devnet.solana.com\nSOLANA_WS_URL=wss://api.devnet.solana.com\nVAULT_PROGRAM_ID=YOUR_PROGRAM_ID_HERE\n\n# Server\nSERVER_HOST=127.0.0.1\nSERVER_PORT=8080\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Important:"})," Replace ",(0,t.jsx)(n.code,{children:"YOUR_PROGRAM_ID_HERE"})," with your deployed program ID!"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-step-3-run-the-backend",children:"\ud83c\udfc3 Step 3: Run the Backend"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cd backend\ncargo run\n"})}),"\n",(0,t.jsx)(n.p,{children:"You should see:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\ud83d\ude80 Starting Collateral Vault Backend Service\n\ud83d\udccb Configuration loaded\n\ud83d\uddc4\ufe0f  Database connected\n\u26d3\ufe0f  Solana client initialized\n\ud83c\udf10 Starting HTTP server on 127.0.0.1:8080\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-step-4-test-the-api",children:"\ud83e\uddea Step 4: Test the API"}),"\n",(0,t.jsx)(n.h3,{id:"health-check",children:"Health Check"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"curl http://localhost:8080/health\n"})}),"\n",(0,t.jsx)(n.h3,{id:"get-vault-balance",children:"Get Vault Balance"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"curl http://localhost:8080/vault/balance/YOUR_USER_PUBKEY\n"})}),"\n",(0,t.jsx)(n.h3,{id:"get-tvl",children:"Get TVL"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"curl http://localhost:8080/vault/tvl\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-step-5-run-the-dashboard",children:"\ud83d\udcca Step 5: Run the Dashboard"}),"\n",(0,t.jsx)(n.h3,{id:"install-dashboard-dependencies",children:"Install Dashboard Dependencies"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cd dashboard\npip install -r requirements.txt\n"})}),"\n",(0,t.jsx)(n.h3,{id:"start-streamlit-dashboard",children:"Start Streamlit Dashboard"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"streamlit run app.py\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Dashboard will open at: ",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.a,{href:"http://localhost:8501",children:"http://localhost:8501"})})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-available-api-endpoints",children:"\ud83d\udd0d Available API Endpoints"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Endpoint"}),(0,t.jsx)(n.th,{children:"Method"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"/health"})}),(0,t.jsx)(n.td,{children:"GET"}),(0,t.jsx)(n.td,{children:"Health check"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"/vault/initialize"})}),(0,t.jsx)(n.td,{children:"POST"}),(0,t.jsx)(n.td,{children:"Initialize new vault"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"/vault/deposit"})}),(0,t.jsx)(n.td,{children:"POST"}),(0,t.jsx)(n.td,{children:"Deposit USDT"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"/vault/withdraw"})}),(0,t.jsx)(n.td,{children:"POST"}),(0,t.jsx)(n.td,{children:"Withdraw USDT"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"/vault/balance/{user}"})}),(0,t.jsx)(n.td,{children:"GET"}),(0,t.jsx)(n.td,{children:"Get vault balance"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"/vault/transactions/{user}"})}),(0,t.jsx)(n.td,{children:"GET"}),(0,t.jsx)(n.td,{children:"Get transaction history"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"/vault/tvl"})}),(0,t.jsx)(n.td,{children:"GET"}),(0,t.jsx)(n.td,{children:"Total Value Locked"})]})]})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-troubleshooting",children:"\ud83d\udc1b Troubleshooting"}),"\n",(0,t.jsx)(n.h3,{id:"backend-wont-start",children:"Backend won't start"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Error: Database connection failed"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Check if PostgreSQL is running\ndocker ps\n\n# Check logs\ndocker logs collateral-vault-db\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Error: Solana RPC connection failed"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Verify ",(0,t.jsx)(n.code,{children:"SOLANA_RPC_URL"})," in ",(0,t.jsx)(n.code,{children:".env"})]}),"\n",(0,t.jsx)(n.li,{children:"Check your internet connection"}),"\n",(0,t.jsx)(n.li,{children:"For devnet, ensure you have valid RPC endpoint"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Error: Program ID not found"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Make sure ",(0,t.jsx)(n.code,{children:"VAULT_PROGRAM_ID"})," in ",(0,t.jsx)(n.code,{children:".env"})," matches your deployed program"]}),"\n",(0,t.jsxs)(n.li,{children:["Verify program is deployed: ",(0,t.jsx)(n.code,{children:"solana program show YOUR_PROGRAM_ID"})]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"dashboard-shows-backend-offline",children:'Dashboard shows "Backend Offline"'}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Check backend is running: ",(0,t.jsx)(n.code,{children:"curl http://localhost:8080/health"})]}),"\n",(0,t.jsxs)(n.li,{children:["Verify ",(0,t.jsx)(n.code,{children:"BACKEND_URL"})," in ",(0,t.jsx)(n.code,{children:"dashboard/app.py"})," matches your backend port"]}),"\n",(0,t.jsx)(n.li,{children:"Check backend logs for errors"}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-real-time-monitoring",children:"\ud83d\udcc8 Real-time Monitoring"}),"\n",(0,t.jsx)(n.p,{children:"The backend includes:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Vault Monitor"})," - Tracks on-chain vault changes"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Balance Tracker"})," - Reconciles on-chain vs off-chain state"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"WebSocket Support"})," - Real-time updates (coming soon)"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-background-services",children:"\ud83d\udd04 Background Services"}),"\n",(0,t.jsx)(n.p,{children:"The backend automatically runs:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Vault Monitor"})," - Watches for new vaults and updates"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Balance Reconciliation"})," - Ensures database matches blockchain"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Alert System"})," - Monitors low balances"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"These run in the background - no action needed!"}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-next-steps",children:"\ud83d\udcdd Next Steps"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"\u2705 Database setup"}),"\n",(0,t.jsx)(n.li,{children:"\u2705 Backend running"}),"\n",(0,t.jsx)(n.li,{children:"\u2705 Dashboard running"}),"\n",(0,t.jsx)(n.li,{children:"\ud83c\udfaf Deploy to production"}),"\n",(0,t.jsx)(n.li,{children:"\ud83c\udfaf Add authentication"}),"\n",(0,t.jsx)(n.li,{children:"\ud83c\udfaf Set up monitoring/alerting"}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-need-help",children:"\ud83c\udd98 Need Help?"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Check backend logs: Look at terminal output"}),"\n",(0,t.jsxs)(n.li,{children:["Check database: ",(0,t.jsx)(n.code,{children:"docker exec -it collateral-vault-db psql -U postgres -d collateral_vault"})]}),"\n",(0,t.jsxs)(n.li,{children:["Check Solana: ",(0,t.jsx)(n.code,{children:"solana cluster-version"})]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},8453:(e,n,l)=>{l.d(n,{R:()=>a,x:()=>i});var s=l(6540);const t={},r=s.createContext(t);function a(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);