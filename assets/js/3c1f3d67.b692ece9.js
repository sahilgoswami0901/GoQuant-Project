"use strict";(globalThis.webpackChunkmy_docs=globalThis.webpackChunkmy_docs||[]).push([[8884],{6259:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>h,frontMatter:()=>r,metadata:()=>t,toc:()=>o});const t=JSON.parse('{"id":"backend/WEBSOCKET_GUIDE","title":"WebSocket Real-Time Updates Guide","description":"\ud83c\udfaf Who Uses WebSockets and Why?","source":"@site/docs/backend/WEBSOCKET_GUIDE.md","sourceDirName":"backend","slug":"/backend/WEBSOCKET_GUIDE","permalink":"/GoQuant-Project/docs/backend/WEBSOCKET_GUIDE","draft":false,"unlisted":false,"editUrl":"https://github.com/sahilgoswami0901/GoQuant-Project/tree/main/docs/backend/WEBSOCKET_GUIDE.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"\ud83d\ude80 Backend Setup & Running Guide","permalink":"/GoQuant-Project/docs/backend/BACKEND_SETUP"},"next":{"title":"Keypair Setup Guide for Position Manager & Liquidation Engine","permalink":"/GoQuant-Project/docs/getting-started/KEYPAIR_SETUP_GUIDE"}}');var a=s(4848),l=s(8453);const r={},i="WebSocket Real-Time Updates Guide",c={},o=[{value:"\ud83c\udfaf Who Uses WebSockets and Why?",id:"-who-uses-websockets-and-why",level:2},{value:"<strong>Primary Users: Frontend Applications (Web/Mobile Apps)</strong>",id:"primary-users-frontend-applications-webmobile-apps",level:3},{value:"\ud83d\udcf1 Real-World Use Cases",id:"-real-world-use-cases",level:2},{value:"<strong>1. Trading Dashboard / DeFi Frontend</strong>",id:"1-trading-dashboard--defi-frontend",level:3},{value:"<strong>2. Portfolio Tracker</strong>",id:"2-portfolio-tracker",level:3},{value:"<strong>3. Admin Dashboard</strong>",id:"3-admin-dashboard",level:3},{value:"\ud83d\udd04 How It Works",id:"-how-it-works",level:2},{value:"<strong>Traditional Approach (Without WebSockets):</strong>",id:"traditional-approach-without-websockets",level:3},{value:"<strong>WebSocket Approach (What We Built):</strong>",id:"websocket-approach-what-we-built",level:3},{value:"\ud83d\udcca Event Types We Send",id:"-event-types-we-send",level:2},{value:"<strong>1. Balance Update</strong> (<code>balance_update</code>)",id:"1-balance-update-balance_update",level:3},{value:"<strong>2. Transaction Confirmed</strong> (<code>transaction_confirmed</code>)",id:"2-transaction-confirmed-transaction_confirmed",level:3},{value:"<strong>3. Collateral Locked</strong> (<code>collateral_locked</code>)",id:"3-collateral-locked-collateral_locked",level:3},{value:"<strong>4. Collateral Unlocked</strong> (<code>collateral_unlocked</code>)",id:"4-collateral-unlocked-collateral_unlocked",level:3},{value:"\ud83d\ude80 How to Connect (Frontend Example)",id:"-how-to-connect-frontend-example",level:2},{value:"<strong>JavaScript/TypeScript:</strong>",id:"javascripttypescript",level:3},{value:"<strong>React Example:</strong>",id:"react-example",level:3},{value:"\ud83c\udfa8 Real-World Example: Trading Interface",id:"-real-world-example-trading-interface",level:2},{value:"\ud83d\udd27 Technical Details",id:"-technical-details",level:2},{value:"<strong>Connection Endpoint:</strong>",id:"connection-endpoint",level:3},{value:"<strong>Message Format:</strong>",id:"message-format",level:3},{value:"<strong>Connection Lifecycle:</strong>",id:"connection-lifecycle",level:3},{value:"<strong>Multiple Connections:</strong>",id:"multiple-connections",level:3},{value:"\ud83d\udcc8 Benefits Summary",id:"-benefits-summary",level:2},{value:"\ud83c\udf93 Summary",id:"-summary",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"websocket-real-time-updates-guide",children:"WebSocket Real-Time Updates Guide"})}),"\n",(0,a.jsx)(n.h2,{id:"-who-uses-websockets-and-why",children:"\ud83c\udfaf Who Uses WebSockets and Why?"}),"\n",(0,a.jsx)(n.h3,{id:"primary-users-frontend-applications-webmobile-apps",children:(0,a.jsx)(n.strong,{children:"Primary Users: Frontend Applications (Web/Mobile Apps)"})}),"\n",(0,a.jsxs)(n.p,{children:["WebSockets are used by ",(0,a.jsx)(n.strong,{children:"frontend applications"})," (React, Vue, Angular, mobile apps) that need to display ",(0,a.jsx)(n.strong,{children:"real-time updates"})," to users without constantly polling the API."]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"-real-world-use-cases",children:"\ud83d\udcf1 Real-World Use Cases"}),"\n",(0,a.jsx)(n.h3,{id:"1-trading-dashboard--defi-frontend",children:(0,a.jsx)(n.strong,{children:"1. Trading Dashboard / DeFi Frontend"})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Who:"})," Users trading on your perpetual futures DEX"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"What They See:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Real-time balance updates"})," when they deposit/withdraw"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Instant transaction confirmations"})," when their trades execute"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Live collateral status"})," when positions are opened/closed"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"TVL (Total Value Locked) updates"})," for the entire platform"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Why WebSockets?"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"No polling needed"}),": Instead of checking balance every 2-3 seconds (wasteful), updates arrive instantly"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Better UX"}),": Users see changes immediately, not after a refresh"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Lower server load"}),": One WebSocket connection vs. hundreds of HTTP requests per minute"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"2-portfolio-tracker",children:(0,a.jsx)(n.strong,{children:"2. Portfolio Tracker"})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Who:"})," Users monitoring their vault across multiple devices"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"What They See:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Balance changes on their phone, tablet, and desktop ",(0,a.jsx)(n.strong,{children:"simultaneously"})]}),"\n",(0,a.jsx)(n.li,{children:"Notifications when transactions complete"}),"\n",(0,a.jsx)(n.li,{children:"Real-time updates when collateral is locked/unlocked by trading positions"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Why WebSockets?"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Multi-device sync"}),": All devices get updates at the same time"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Battery efficient"}),": Mobile apps don't need to constantly poll"]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"3-admin-dashboard",children:(0,a.jsx)(n.strong,{children:"3. Admin Dashboard"})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Who:"})," Platform administrators monitoring system health"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"What They See:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Real-time TVL (Total Value Locked) across all vaults"}),"\n",(0,a.jsx)(n.li,{children:"System health updates"}),"\n",(0,a.jsx)(n.li,{children:"Transaction volume metrics"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Why WebSockets?"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Live monitoring"}),": See changes as they happen"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Alert system"}),": Can trigger alerts based on WebSocket events"]}),"\n"]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"-how-it-works",children:"\ud83d\udd04 How It Works"}),"\n",(0,a.jsx)(n.h3,{id:"traditional-approach-without-websockets",children:(0,a.jsx)(n.strong,{children:"Traditional Approach (Without WebSockets):"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"// \u274c BAD: Polling every 2 seconds\nsetInterval(async () => {\n  const balance = await fetch('/vault/balance/USER_ADDRESS');\n  updateUI(balance);\n}, 2000); // Wastes bandwidth, server resources\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Problems:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"\u274c Wastes bandwidth (checking even when nothing changed)"}),"\n",(0,a.jsx)(n.li,{children:"\u274c High server load (thousands of requests per minute)"}),"\n",(0,a.jsx)(n.li,{children:"\u274c Delayed updates (up to 2 seconds delay)"}),"\n",(0,a.jsx)(n.li,{children:"\u274c Battery drain on mobile"}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"websocket-approach-what-we-built",children:(0,a.jsx)(n.strong,{children:"WebSocket Approach (What We Built):"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"// \u2705 GOOD: Real-time updates\nconst ws = new WebSocket('ws://localhost:8080/ws/USER_ADDRESS');\n\nws.onmessage = (event) => {\n  const message = JSON.parse(event.data);\n  \n  if (message.event === 'balance_update') {\n    // Update UI immediately when balance changes\n    updateBalance(message.data);\n  }\n  \n  if (message.event === 'transaction_confirmed') {\n    // Show notification when transaction completes\n    showNotification('Deposit confirmed!');\n  }\n};\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Benefits:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\u2705 ",(0,a.jsx)(n.strong,{children:"Instant updates"}),": Changes arrive immediately"]}),"\n",(0,a.jsxs)(n.li,{children:["\u2705 ",(0,a.jsx)(n.strong,{children:"Efficient"}),": Only sends data when something changes"]}),"\n",(0,a.jsxs)(n.li,{children:["\u2705 ",(0,a.jsx)(n.strong,{children:"Low latency"}),": No polling delay"]}),"\n",(0,a.jsxs)(n.li,{children:["\u2705 ",(0,a.jsx)(n.strong,{children:"Battery friendly"}),": Mobile apps don't constantly poll"]}),"\n"]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"-event-types-we-send",children:"\ud83d\udcca Event Types We Send"}),"\n",(0,a.jsxs)(n.h3,{id:"1-balance-update-balance_update",children:[(0,a.jsx)(n.strong,{children:"1. Balance Update"})," (",(0,a.jsx)(n.code,{children:"balance_update"}),")"]}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"When:"})," After deposit, withdraw, lock, or unlock operations"]}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Who Gets It:"})," The user whose vault changed"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Example:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\n  "event": "balance_update",\n  "data": {\n    "owner": "HjxQC5jmM8JQrKmVLz29fvaVU428BQ3NzM7a3uQECt9m",\n    "totalBalance": 1000000000,\n    "lockedBalance": 200000000,\n    "availableBalance": 800000000\n  },\n  "timestamp": "2025-12-08T21:30:00Z"\n}\n'})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Frontend Use:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"// Update balance display in real-time\nif (message.event === 'balance_update') {\n  document.getElementById('total-balance').textContent = \n    formatUSDT(message.data.totalBalance);\n  document.getElementById('available-balance').textContent = \n    formatUSDT(message.data.availableBalance);\n}\n"})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsxs)(n.h3,{id:"2-transaction-confirmed-transaction_confirmed",children:[(0,a.jsx)(n.strong,{children:"2. Transaction Confirmed"})," (",(0,a.jsx)(n.code,{children:"transaction_confirmed"}),")"]}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"When:"})," When a deposit or withdraw transaction is confirmed on-chain"]}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Who Gets It:"})," The user who initiated the transaction"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Example:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\n  "event": "transaction_confirmed",\n  "data": {\n    "transactionId": "a73028b9-6e47-4e8c-8ffd-5f13ecc797a7",\n    "transactionType": "deposit",\n    "amount": 100000000,\n    "signature": "5j7Ks8...abc123"\n  },\n  "timestamp": "2025-12-08T21:30:05Z"\n}\n'})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Frontend Use:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"// Show success notification\nif (message.event === 'transaction_confirmed') {\n  showToast(`\u2705 ${message.data.transactionType} confirmed!`);\n  // Update transaction history\n  addToTransactionHistory(message.data);\n}\n"})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsxs)(n.h3,{id:"3-collateral-locked-collateral_locked",children:[(0,a.jsx)(n.strong,{children:"3. Collateral Locked"})," (",(0,a.jsx)(n.code,{children:"collateral_locked"}),")"]}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"When:"})," When a trading position locks collateral"]}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Who Gets It:"})," The vault owner"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Example:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\n  "event": "collateral_locked",\n  "data": {\n    "owner": "HjxQC5jmM8JQrKmVLz29fvaVU428BQ3NzM7a3uQECt9m",\n    "amount": 50000000,\n    "positionId": "pos_12345",\n    "lockedBalance": 250000000,\n    "availableBalance": 750000000\n  },\n  "timestamp": "2025-12-08T21:31:00Z"\n}\n'})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Frontend Use:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"// Update position display\nif (message.event === 'collateral_locked') {\n  updatePositionStatus(message.data.positionId, 'locked');\n  updateAvailableBalance(message.data.availableBalance);\n}\n"})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsxs)(n.h3,{id:"4-collateral-unlocked-collateral_unlocked",children:[(0,a.jsx)(n.strong,{children:"4. Collateral Unlocked"})," (",(0,a.jsx)(n.code,{children:"collateral_unlocked"}),")"]}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"When:"})," When a trading position closes and unlocks collateral"]}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Who Gets It:"})," The vault owner"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Example:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\n  "event": "collateral_unlocked",\n  "data": {\n    "owner": "HjxQC5jmM8JQrKmVLz29fvaVU428BQ3NzM7a3uQECt9m",\n    "amount": 50000000,\n    "positionId": "pos_12345",\n    "lockedBalance": 200000000,\n    "availableBalance": 800000000\n  },\n  "timestamp": "2025-12-08T21:32:00Z"\n}\n'})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"-how-to-connect-frontend-example",children:"\ud83d\ude80 How to Connect (Frontend Example)"}),"\n",(0,a.jsx)(n.h3,{id:"javascripttypescript",children:(0,a.jsx)(n.strong,{children:"JavaScript/TypeScript:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"// Connect to WebSocket\nconst userAddress = 'HjxQC5jmM8JQrKmVLz29fvaVU428BQ3NzM7a3uQECt9m';\nconst ws = new WebSocket(`ws://localhost:8080/ws/${userAddress}`);\n\n// Handle connection open\nws.onopen = () => {\n  console.log('\u2705 WebSocket connected');\n};\n\n// Handle incoming messages\nws.onmessage = (event) => {\n  const message = JSON.parse(event.data);\n  \n  switch (message.event) {\n    case 'balance_update':\n      updateBalanceDisplay(message.data);\n      break;\n      \n    case 'transaction_confirmed':\n      showTransactionNotification(message.data);\n      break;\n      \n    case 'collateral_locked':\n      updatePositionStatus(message.data);\n      break;\n      \n    case 'collateral_unlocked':\n      updatePositionStatus(message.data);\n      break;\n      \n    case 'health_update':\n      console.log('Connection status:', message.data.status);\n      break;\n  }\n};\n\n// Handle errors\nws.onerror = (error) => {\n  console.error('WebSocket error:', error);\n};\n\n// Handle disconnection\nws.onclose = () => {\n  console.log('WebSocket disconnected, reconnecting...');\n  // Implement reconnection logic\n  setTimeout(() => {\n    // Reconnect\n  }, 3000);\n};\n"})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h3,{id:"react-example",children:(0,a.jsx)(n.strong,{children:"React Example:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",children:"import { useEffect, useState } from 'react';\n\nfunction VaultDashboard({ userAddress }: { userAddress: string }) {\n  const [balance, setBalance] = useState({ total: 0, available: 0, locked: 0 });\n  const [notifications, setNotifications] = useState<string[]>([]);\n\n  useEffect(() => {\n    const ws = new WebSocket(`ws://localhost:8080/ws/${userAddress}`);\n\n    ws.onmessage = (event) => {\n      const message = JSON.parse(event.data);\n\n      if (message.event === 'balance_update') {\n        setBalance({\n          total: message.data.totalBalance,\n          available: message.data.availableBalance,\n          locked: message.data.lockedBalance,\n        });\n      }\n\n      if (message.event === 'transaction_confirmed') {\n        setNotifications(prev => [\n          ...prev,\n          `${message.data.transactionType} confirmed!`\n        ]);\n      }\n    };\n\n    return () => ws.close();\n  }, [userAddress]);\n\n  return (\n    <div>\n      <h2>Vault Balance</h2>\n      <p>Total: {formatUSDT(balance.total)}</p>\n      <p>Available: {formatUSDT(balance.available)}</p>\n      <p>Locked: {formatUSDT(balance.locked)}</p>\n      \n      {notifications.map((notif, i) => (\n        <div key={i}>{notif}</div>\n      ))}\n    </div>\n  );\n}\n"})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"-real-world-example-trading-interface",children:"\ud83c\udfa8 Real-World Example: Trading Interface"}),"\n",(0,a.jsx)(n.p,{children:"Imagine a user is trading on your platform:"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"User opens trading interface"})," \u2192 WebSocket connects"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"User deposits 100 USDT"}),' \u2192 Frontend shows "Processing..."']}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Transaction confirms on-chain"})," \u2192 WebSocket receives ",(0,a.jsx)(n.code,{children:"transaction_confirmed"})]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Frontend updates"})," \u2192 Balance shows 100 USDT instantly"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"User opens a position"})," \u2192 Trading program locks 50 USDT"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsxs)(n.strong,{children:["WebSocket receives ",(0,a.jsx)(n.code,{children:"collateral_locked"})]})," \u2192 Frontend updates:","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Available balance: 50 USDT"}),"\n",(0,a.jsx)(n.li,{children:"Locked balance: 50 USDT"}),"\n",(0,a.jsx)(n.li,{children:'Position status: "Active"'}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"User closes position"})," \u2192 WebSocket receives ",(0,a.jsx)(n.code,{children:"collateral_unlocked"})]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Frontend updates"})," \u2192 Available balance back to 100 USDT"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"All of this happens in real-time without the user refreshing the page!"})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"-technical-details",children:"\ud83d\udd27 Technical Details"}),"\n",(0,a.jsx)(n.h3,{id:"connection-endpoint",children:(0,a.jsx)(n.strong,{children:"Connection Endpoint:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"ws://localhost:8080/ws/{user_pubkey}\n"})}),"\n",(0,a.jsx)(n.h3,{id:"message-format",children:(0,a.jsx)(n.strong,{children:"Message Format:"})}),"\n",(0,a.jsx)(n.p,{children:"All messages are JSON with this structure:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\n  "event": "event_type",\n  "data": { /* event-specific data */ },\n  "timestamp": "ISO 8601 timestamp"\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"connection-lifecycle",children:(0,a.jsx)(n.strong,{children:"Connection Lifecycle:"})}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"Client connects \u2192 Server sends welcome message"}),"\n",(0,a.jsx)(n.li,{children:"Client stays connected \u2192 Receives events as they occur"}),"\n",(0,a.jsx)(n.li,{children:"Client disconnects \u2192 Server cleans up connection"}),"\n",(0,a.jsx)(n.li,{children:"Client reconnects \u2192 Can reconnect anytime"}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"multiple-connections",children:(0,a.jsx)(n.strong,{children:"Multiple Connections:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Same user can connect from multiple devices/tabs"}),"\n",(0,a.jsx)(n.li,{children:"All connections receive the same events"}),"\n",(0,a.jsx)(n.li,{children:"Each connection is independent"}),"\n"]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"-benefits-summary",children:"\ud83d\udcc8 Benefits Summary"}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Feature"}),(0,a.jsx)(n.th,{children:"Without WebSockets"}),(0,a.jsx)(n.th,{children:"With WebSockets"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.strong,{children:"Update Speed"})}),(0,a.jsx)(n.td,{children:"2-3 second delay"}),(0,a.jsx)(n.td,{children:"Instant"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.strong,{children:"Server Load"})}),(0,a.jsx)(n.td,{children:"High (constant polling)"}),(0,a.jsx)(n.td,{children:"Low (event-driven)"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.strong,{children:"Bandwidth"})}),(0,a.jsx)(n.td,{children:"High (redundant requests)"}),(0,a.jsx)(n.td,{children:"Low (only when needed)"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.strong,{children:"Battery (Mobile)"})}),(0,a.jsx)(n.td,{children:"Drains quickly"}),(0,a.jsx)(n.td,{children:"Efficient"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:(0,a.jsx)(n.strong,{children:"User Experience"})}),(0,a.jsx)(n.td,{children:'"Stale" data'}),(0,a.jsx)(n.td,{children:"Real-time updates"})]})]})]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"-summary",children:"\ud83c\udf93 Summary"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"WebSockets enable real-time, bidirectional communication between your backend and frontend applications."})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Who uses them:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Frontend web applications (React, Vue, etc.)"}),"\n",(0,a.jsx)(n.li,{children:"Mobile apps (React Native, Flutter, etc.)"}),"\n",(0,a.jsx)(n.li,{children:"Trading dashboards"}),"\n",(0,a.jsx)(n.li,{children:"Admin panels"}),"\n",(0,a.jsx)(n.li,{children:"Any app needing live updates"}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Why they're important:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Better UX"}),": Users see changes instantly"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Efficiency"}),": No wasteful polling"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Scalability"}),": Lower server load"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Modern"}),": Industry standard for real-time apps"]}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["Your collateral vault system now provides ",(0,a.jsx)(n.strong,{children:"real-time updates"})," to any frontend that connects, making it perfect for building a modern DeFi trading interface! \ud83d\ude80"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>i});var t=s(6540);const a={},l=t.createContext(a);function r(e){const n=t.useContext(l);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),t.createElement(l.Provider,{value:n},e.children)}}}]);