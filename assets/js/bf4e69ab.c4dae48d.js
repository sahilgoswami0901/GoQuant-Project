"use strict";(globalThis.webpackChunkmy_docs=globalThis.webpackChunkmy_docs||[]).push([[2604],{8235:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>o,contentTitle:()=>r,default:()=>h,frontMatter:()=>l,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"backend/API_COMMANDS","title":"Collateral Vault API Commands","description":"Complete guide for interacting with the Collateral Vault API on Solana Devnet.","source":"@site/docs/backend/API_COMMANDS.md","sourceDirName":"backend","slug":"/backend/API_COMMANDS","permalink":"/GoQuant-Project/docs/backend/API_COMMANDS","draft":false,"unlisted":false,"editUrl":"https://github.com/sahilgoswami0901/GoQuant-Project/tree/main/docs/backend/API_COMMANDS.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","next":{"title":"\ud83d\ude80 Backend Setup & Running Guide","permalink":"/GoQuant-Project/docs/backend/BACKEND_SETUP"}}');var a=s(4848),i=s(8453);const l={},r="Collateral Vault API Commands",o={},c=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"\ud83d\udccb Available Endpoints",id:"-available-endpoints",level:2},{value:"1. <strong>Health Check</strong>",id:"1-health-check",level:3},{value:"2. <strong>Initialize Vault</strong>",id:"2-initialize-vault",level:3},{value:"Option A: Auto-Submit (Recommended for Devnet/Testing)",id:"option-a-auto-submit-recommended-for-devnettesting",level:4},{value:"Option B: Manual Sign &amp; Submit",id:"option-b-manual-sign--submit",level:4},{value:"3. <strong>Deposit USDT</strong>",id:"3-deposit-usdt",level:3},{value:"Option A: Auto-Submit (Recommended for Devnet/Testing)",id:"option-a-auto-submit-recommended-for-devnettesting-1",level:4},{value:"Option B: Manual Sign &amp; Submit",id:"option-b-manual-sign--submit-1",level:4},{value:"4. <strong>Lock Collateral</strong> (Position Manager)",id:"4-lock-collateral-position-manager",level:3},{value:"5. <strong>Unlock Collateral</strong> (Position Manager)",id:"5-unlock-collateral-position-manager",level:3},{value:"6. <strong>Transfer Collateral (Internal)</strong> (Liquidation Engine / Settlement)",id:"6-transfer-collateral-internal-liquidation-engine--settlement",level:3},{value:"4. <strong>Mint Test USDT (Devnet Only)</strong>",id:"4-mint-test-usdt-devnet-only",level:3},{value:"5. <strong>Withdraw USDT</strong>",id:"5-withdraw-usdt",level:3},{value:"Option A: Auto-Submit (Recommended for Devnet/Testing)",id:"option-a-auto-submit-recommended-for-devnettesting-2",level:4},{value:"Option B: Manual Sign &amp; Submit",id:"option-b-manual-sign--submit-2",level:4},{value:"6. <strong>Get Balance</strong>",id:"6-get-balance",level:3},{value:"6. <strong>Get Transaction History</strong>",id:"6-get-transaction-history",level:3},{value:"7. <strong>Get Total Value Locked (TVL)</strong>",id:"7-get-total-value-locked-tvl",level:3},{value:"\ud83d\udd12 Lock &amp; Unlock (Internal APIs)",id:"-lock--unlock-internal-apis",level:2},{value:"\ud83d\ude80 Complete Workflow Example",id:"-complete-workflow-example",level:2},{value:"\ud83d\udcdd Important Notes",id:"-important-notes",level:2},{value:"\ud83d\udd0d View on Solana Explorer",id:"-view-on-solana-explorer",level:2},{value:"\ud83d\udee0\ufe0f Troubleshooting",id:"\ufe0f-troubleshooting",level:2}];function d(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...n.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e.header,{children:(0,a.jsx)(e.h1,{id:"collateral-vault-api-commands",children:"Collateral Vault API Commands"})}),"\n",(0,a.jsx)(e.p,{children:"Complete guide for interacting with the Collateral Vault API on Solana Devnet."}),"\n",(0,a.jsx)(e.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,a.jsxs)(e.ol,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Backend running"}),": Make sure the backend is running on ",(0,a.jsx)(e.code,{children:"http://127.0.0.1:8080"})]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Your wallet address"}),": Replace ",(0,a.jsx)(e.code,{children:"YOUR_WALLET_ADDRESS"})," with your actual Solana wallet public key"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"USDT on Devnet"}),": You'll need test USDT tokens for deposits"]}),"\n"]}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"-available-endpoints",children:"\ud83d\udccb Available Endpoints"}),"\n",(0,a.jsxs)(e.h3,{id:"1-health-check",children:["1. ",(0,a.jsx)(e.strong,{children:"Health Check"})]}),"\n",(0,a.jsx)(e.p,{children:"Check if the backend is running and healthy."}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"curl http://127.0.0.1:8080/health\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Expected Response:"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-json",children:'{\n  "success": true,\n  "data": {\n    "status": "healthy",\n    "database": true,\n    "solanaRpc": true,\n    "version": "0.1.0",\n    "timestamp": "2025-12-08T12:00:00Z"\n  }\n}\n'})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsxs)(e.h3,{id:"2-initialize-vault",children:["2. ",(0,a.jsx)(e.strong,{children:"Initialize Vault"})]}),"\n",(0,a.jsx)(e.p,{children:"Create a new vault for your wallet. This creates the PDA account on-chain."}),"\n",(0,a.jsx)(e.h4,{id:"option-a-auto-submit-recommended-for-devnettesting",children:"Option A: Auto-Submit (Recommended for Devnet/Testing)"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:'curl -X POST http://127.0.0.1:8080/vault/initialize \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "userPubkey": "YOUR_WALLET_ADDRESS",\n    "userKeypairPath": "~/.config/solana/id.json"\n  }\'\n'})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Response:"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-json",children:'{\n  "success": true,\n  "data": {\n    "transactionId": "...",\n    "status": "submitted",\n    "signature": "5Ht3Rjabc123...",\n    "message": "Transaction submitted successfully. Signature: 5Ht3Rjabc123..."\n  }\n}\n'})}),"\n",(0,a.jsx)(e.h4,{id:"option-b-manual-sign--submit",children:"Option B: Manual Sign & Submit"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:'curl -X POST http://127.0.0.1:8080/vault/initialize \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "userPubkey": "YOUR_WALLET_ADDRESS"\n  }\'\n'})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Example (with auto-submit):"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:'curl -X POST http://127.0.0.1:8080/vault/initialize \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "userPubkey": "HjxQC5jmM8JQrKmVLz29fvaVU428BQ3NzM7a3uQECt9m",\n    "userKeypairPath": "~/.config/solana/id.json"\n  }\'\n'})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Response:"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-json",children:'{\n  "success": true,\n  "data": {\n    "transactionId": "550e8400-e29b-41d4-a716-446655440000",\n    "status": "pending",\n    "unsignedTransaction": "base64_encoded_transaction...",\n    "message": "Sign and submit this transaction with your wallet"\n  }\n}\n'})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Next Steps:"})}),"\n",(0,a.jsxs)(e.ol,{children:["\n",(0,a.jsxs)(e.li,{children:["Copy the ",(0,a.jsx)(e.code,{children:"unsignedTransaction"})," from the response"]}),"\n",(0,a.jsx)(e.li,{children:"Sign it with your wallet (using Solana CLI, Phantom, or another wallet)"}),"\n",(0,a.jsx)(e.li,{children:"Submit the signed transaction to Solana Devnet"}),"\n"]}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsxs)(e.h3,{id:"3-deposit-usdt",children:["3. ",(0,a.jsx)(e.strong,{children:"Deposit USDT"})]}),"\n",(0,a.jsx)(e.p,{children:"Deposit USDT tokens into your vault."}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"\u26a0\ufe0f Important:"})," Before depositing, you must have USDT in your token account. The vault does NOT provide USDT - you need to acquire it first through:"]}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"Buying USDT on a DEX (Jupiter, Raydium, Orca)"}),"\n",(0,a.jsx)(e.li,{children:"Receiving USDT from another user"}),"\n",(0,a.jsx)(e.li,{children:"Bridging USDT from another blockchain"}),"\n",(0,a.jsxs)(e.li,{children:["Using the ",(0,a.jsx)(e.code,{children:"/vault/mint-usdt"})," endpoint (devnet only)"]}),"\n"]}),"\n",(0,a.jsxs)(e.p,{children:["See ",(0,a.jsx)(e.code,{children:"USDT_ACQUISITION_GUIDE.md"})," for detailed instructions."]}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"Note:"})," Amount is in smallest units (6 decimals)."]}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"1 USDT = 1,000,000"}),"\n",(0,a.jsx)(e.li,{children:"100 USDT = 100,000,000"}),"\n"]}),"\n",(0,a.jsx)(e.h4,{id:"option-a-auto-submit-recommended-for-devnettesting-1",children:"Option A: Auto-Submit (Recommended for Devnet/Testing)"}),"\n",(0,a.jsx)(e.p,{children:"The backend can automatically sign and submit the transaction if you provide your keypair path:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:'curl -X POST http://127.0.0.1:8080/vault/deposit \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "userPubkey": "YOUR_WALLET_ADDRESS",\n    "amount": 100000000,\n    "userKeypairPath": "~/.config/solana/id.json"\n  }\'\n'})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Response (Auto-Submit):"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-json",children:'{\n  "success": true,\n  "data": {\n    "transactionId": "...",\n    "status": "submitted",\n    "signature": "5Ht3Rjabc123...",\n    "message": "Transaction submitted successfully. Signature: 5Ht3Rjabc123..."\n  }\n}\n'})}),"\n",(0,a.jsx)(e.h4,{id:"option-b-manual-sign--submit-1",children:"Option B: Manual Sign & Submit"}),"\n",(0,a.jsxs)(e.p,{children:["If you don't provide ",(0,a.jsx)(e.code,{children:"userKeypairPath"}),", you'll receive an unsigned transaction:"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:'curl -X POST http://127.0.0.1:8080/vault/deposit \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "userPubkey": "YOUR_WALLET_ADDRESS",\n    "amount": 100000000\n  }\'\n'})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Example (deposit 100 USDT):"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:'curl -X POST http://127.0.0.1:8080/vault/deposit \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "userPubkey": "GXvyLzGdAaKqs7ZPgxD7ALT1Rveto4T2YbJTo3RCGv7M",\n    "amount": 100000000\n  }\'\n'})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Response (Manual Sign):"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-json",children:'{\n  "success": true,\n  "data": {\n    "transactionId": "...",\n    "status": "pending",\n    "unsignedTransaction": "base64...",\n    "message": "Sign and submit this transaction"\n  }\n}\n'})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Response (Auto-Submit):"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-json",children:'{\n  "success": true,\n  "data": {\n    "transactionId": "...",\n    "status": "submitted",\n    "signature": "5Ht3Rjabc123...",\n    "message": "Transaction submitted successfully. Signature: 5Ht3Rjabc123..."\n  }\n}\n'})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsxs)(e.h3,{id:"4-lock-collateral-position-manager",children:["4. ",(0,a.jsx)(e.strong,{children:"Lock Collateral"})," (Position Manager)"]}),"\n",(0,a.jsxs)(e.p,{children:["Locks a portion of a user's available balance so it cannot be withdrawn. Must be signed by the ",(0,a.jsx)(e.strong,{children:"position manager"})," (authorized program)."]}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"\u26a0\ufe0f Note:"})," The ",(0,a.jsx)(e.code,{children:"positionId"}),' is a unique identifier for the trading position that requires this collateral lock. It can be any string (e.g., "pos_123abc", "position_001", etc.).']}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Request Body:"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-json",children:'{\n  "userPubkey": "USER_VAULT_OWNER",\n  "amount": 50000000,\n  "positionId": "pos_123abc",\n  "positionManagerKeypairPath": "~/.config/solana/position-manager.json"\n}\n'})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Call:"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:'curl -X POST http://127.0.0.1:8080/vault/lock-collateral \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "userPubkey": "YOUR_WALLET_ADDRESS",\n    "amount": 50000000,\n    "positionId": "pos_1",\n    "positionManagerKeypairPath": "~/.config/solana/position-manager.json"\n  }\'\n'})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:'Example (lock 50 USDT for position "pos_001"):'})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:'curl -X POST http://127.0.0.1:8080/vault/lock-collateral \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "userPubkey": "HjxQC5jmM8JQrKmVLz29fvaVU428BQ3NzM7a3uQECt9m",\n    "amount": 50000000,\n    "positionId": "pos_001",\n    "positionManagerKeypairPath": "~/.config/solana/position-manager.json"\n  }\'\n'})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Response:"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-json",children:'{\n  "success": true,\n  "data": {\n    "transactionId": "...",\n    "status": "submitted",\n    "signature": "5Ht3Rjabc123...",\n    "message": "Transaction submitted successfully. Signature: 5Ht3Rjabc123..."\n  }\n}\n'})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsxs)(e.h3,{id:"5-unlock-collateral-position-manager",children:["5. ",(0,a.jsx)(e.strong,{children:"Unlock Collateral"})," (Position Manager)"]}),"\n",(0,a.jsxs)(e.p,{children:["Releases previously locked collateral back to available balance. Must be signed by the ",(0,a.jsx)(e.strong,{children:"position manager"})," (authorized program)."]}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"\u26a0\ufe0f Note:"})," The ",(0,a.jsx)(e.code,{children:"positionId"})," must match the position ID used when the collateral was originally locked."]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Request Body:"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-json",children:'{\n  "userPubkey": "USER_VAULT_OWNER",\n  "amount": 50000000,\n  "positionId": "pos_1",\n  "positionManagerKeypairPath": "~/.config/solana/position-manager.json"\n}\n'})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Call:"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:'curl -X POST http://127.0.0.1:8080/vault/unlock-collateral \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "userPubkey": "YOUR_WALLET_ADDRESS",\n    "amount": 50000000,\n    "positionId": "pos_1",\n    "positionManagerKeypairPath": "~/.config/solana/position-manager.json"\n  }\'\n'})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:'Example (unlock 50 USDT for position "pos_001"):'})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:'curl -X POST http://127.0.0.1:8080/vault/unlock-collateral \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "userPubkey": "HjxQC5jmM8JQrKmVLz29fvaVU428BQ3NzM7a3uQECt9m",\n    "amount": 50000000,\n    "positionId": "pos_001",\n    "positionManagerKeypairPath": "~/.config/solana/position-manager.json"\n  }\'\n'})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Response:"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-json",children:'{\n  "success": true,\n  "data": {\n    "transactionId": "...",\n    "status": "submitted",\n    "signature": "5Ht3Rjabc123...",\n    "message": "Transaction submitted successfully. Signature: 5Ht3Rjabc123..."\n  }\n}\n'})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsxs)(e.h3,{id:"6-transfer-collateral-internal-liquidation-engine--settlement",children:["6. ",(0,a.jsx)(e.strong,{children:"Transfer Collateral (Internal)"})," (Liquidation Engine / Settlement)"]}),"\n",(0,a.jsxs)(e.p,{children:["Moves collateral between two vaults (e.g., settlement or liquidation). Must be signed by the ",(0,a.jsx)(e.strong,{children:"liquidation engine"})," keypair (authorized program). ",(0,a.jsx)(e.code,{children:"reason"})," helps auditing (",(0,a.jsx)(e.code,{children:"settlement"}),", ",(0,a.jsx)(e.code,{children:"liquidation"}),", ",(0,a.jsx)(e.code,{children:"fee"}),")."]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Request Body:"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-json",children:'{\n  "fromPubkey": "SOURCE_VAULT_OWNER",\n  "toPubkey": "DESTINATION_VAULT_OWNER",\n  "amount": 50000000,\n  "reason": "settlement",\n  "liquidationEngineKeypairPath": "~/.config/solana/liquidation-engine.json"\n}\n'})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Call:"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:'curl -X POST http://127.0.0.1:8080/vault/transfer-collateral \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "fromPubkey": "SOURCE_WALLET",\n    "toPubkey": "DEST_WALLET",\n    "amount": 50000000,\n    "reason": "settlement",\n    "liquidationEngineKeypairPath": "~/.config/solana/liquidation-engine.json"\n  }\'\n'})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsxs)(e.h3,{id:"4-mint-test-usdt-devnet-only",children:["4. ",(0,a.jsx)(e.strong,{children:"Mint Test USDT (Devnet Only)"})]}),"\n",(0,a.jsxs)(e.p,{children:["Mint test USDT tokens to your token account. ",(0,a.jsx)(e.strong,{children:"This endpoint only works on devnet!"})]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"\u26a0\ufe0f Important:"})}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"Only works on devnet/localhost"}),"\n",(0,a.jsx)(e.li,{children:"Requires backend keypair to have mint authority for the USDT mint"}),"\n",(0,a.jsx)(e.li,{children:"For testing purposes only"}),"\n",(0,a.jsx)(e.li,{children:"Amount is in smallest units (6 decimals)"}),"\n"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:'curl -X POST http://127.0.0.1:8080/vault/mint-usdt \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "userPubkey": "YOUR_WALLET_ADDRESS",\n    "amount": 1000000000\n  }\'\n'})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Example (mint 1000 USDT):"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:'curl -X POST http://127.0.0.1:8080/vault/mint-usdt \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "userPubkey": "GXvyLzGdAaKqs7ZPgxD7ALT1Rveto4T2YbJTo3RCGv7M",\n    "amount": 1000000000\n  }\'\n'})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Response:"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-json",children:'{\n  "success": true,\n  "data": {\n    "signature": "5Ht3Rjabc...",\n    "amount": 1000000000,\n    "formattedAmount": "1000.00 USDT",\n    "userPubkey": "GXvyLzGdAaKqs7ZPgxD7ALT1Rveto4T2YbJTo3RCGv7M",\n    "message": "Successfully minted 1000.00 USDT"\n  }\n}\n'})}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"Note:"})," This will automatically create the user's token account if it doesn't exist."]}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsxs)(e.h3,{id:"5-withdraw-usdt",children:["5. ",(0,a.jsx)(e.strong,{children:"Withdraw USDT"})]}),"\n",(0,a.jsx)(e.p,{children:"Withdraw USDT from your vault back to your wallet."}),"\n",(0,a.jsx)(e.h4,{id:"option-a-auto-submit-recommended-for-devnettesting-2",children:"Option A: Auto-Submit (Recommended for Devnet/Testing)"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:'curl -X POST http://127.0.0.1:8080/vault/withdraw \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "userPubkey": "YOUR_WALLET_ADDRESS",\n    "amount": 50000000,\n    "userKeypairPath": "~/.config/solana/id.json"\n  }\'\n'})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Response:"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-json",children:'{\n  "success": true,\n  "data": {\n    "transactionId": "...",\n    "status": "submitted",\n    "signature": "5Ht3Rjabc123...",\n    "message": "Transaction submitted successfully. Signature: 5Ht3Rjabc123..."\n  }\n}\n'})}),"\n",(0,a.jsx)(e.h4,{id:"option-b-manual-sign--submit-2",children:"Option B: Manual Sign & Submit"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:'curl -X POST http://127.0.0.1:8080/vault/withdraw \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "userPubkey": "YOUR_WALLET_ADDRESS",\n    "amount": 50000000\n  }\'\n'})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Example (withdraw 50 USDT with auto-submit):"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:'curl -X POST http://127.0.0.1:8080/vault/withdraw \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "userPubkey": "HjxQC5jmM8JQrKmVLz29fvaVU428BQ3NzM7a3uQECt9m",\n    "amount": 50000000,\n    "userKeypairPath": "~/.config/solana/id.json"\n  }\'\n'})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsxs)(e.h3,{id:"6-get-balance",children:["6. ",(0,a.jsx)(e.strong,{children:"Get Balance"})]}),"\n",(0,a.jsx)(e.p,{children:"Check your vault balance (total, locked, and available)."}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"curl http://127.0.0.1:8080/vault/balance/YOUR_WALLET_ADDRESS\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Example:"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"curl http://127.0.0.1:8080/vault/balance/GXvyLzGdAaKqs7ZPgxD7ALT1Rveto4T2YbJTo3RCGv7M\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Response:"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-json",children:'{\n  "success": true,\n  "data": {\n    "owner": "GXvyLzGdAaKqs7ZPgxD7ALT1Rveto4T2YbJTo3RCGv7M",\n    "totalBalance": 100000000,\n    "lockedBalance": 0,\n    "availableBalance": 100000000,\n    "totalDeposited": 100000000,\n    "totalWithdrawn": 0\n  }\n}\n'})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsxs)(e.h3,{id:"6-get-transaction-history",children:["6. ",(0,a.jsx)(e.strong,{children:"Get Transaction History"})]}),"\n",(0,a.jsx)(e.p,{children:"View all transactions for your vault."}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:'curl "http://127.0.0.1:8080/vault/transactions/YOUR_WALLET_ADDRESS?limit=20&offset=0"\n'})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Example:"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:'curl "http://127.0.0.1:8080/vault/transactions/GXvyLzGdAaKqs7ZPgxD7ALT1Rveto4T2YbJTo3RCGv7M?limit=20&offset=0"\n'})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Query Parameters:"})}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"limit"}),": Number of transactions (default: 20, max: 100)"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"offset"}),": Skip N transactions (for pagination)"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.code,{children:"type"}),": Filter by type (deposit, withdrawal, lock, unlock, etc.)"]}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Example with filters:"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:'curl "http://127.0.0.1:8080/vault/transactions/GXvyLzGdAaKqs7ZPgxD7ALT1Rveto4T2YbJTo3RCGv7M?limit=10&type=deposit"\n'})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsxs)(e.h3,{id:"7-get-total-value-locked-tvl",children:["7. ",(0,a.jsx)(e.strong,{children:"Get Total Value Locked (TVL)"})]}),"\n",(0,a.jsx)(e.p,{children:"See the total value locked across all vaults."}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"curl http://127.0.0.1:8080/vault/tvl\n"})}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Response:"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-json",children:'{\n  "success": true,\n  "data": {\n    "totalValueLocked": 500000000,\n    "activeVaults": 5,\n    "totalLocked": 200000000,\n    "totalAvailable": 300000000,\n    "timestamp": "2025-12-08T12:00:00Z"\n  }\n}\n'})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"-lock--unlock-internal-apis",children:"\ud83d\udd12 Lock & Unlock (Internal APIs)"}),"\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"Note:"})," Lock and Unlock operations are ",(0,a.jsx)(e.strong,{children:"internal APIs"})," meant to be called by the trading system, not directly by users. They require special authorization."]}),"\n",(0,a.jsx)(e.p,{children:"However, if you want to test them, you would need to:"}),"\n",(0,a.jsxs)(e.ol,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Add internal routes"})," to the backend (currently not exposed)"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Use admin authority"})," to call them"]}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:"For now, these operations are handled by the smart contract directly via CPI (Cross-Program Invocation) from the trading system."}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"-complete-workflow-example",children:"\ud83d\ude80 Complete Workflow Example"}),"\n",(0,a.jsx)(e.p,{children:"Here's a complete example workflow:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:'# 1. Check health\ncurl http://127.0.0.1:8080/health\n\n# 2. Initialize vault (replace with your wallet)\ncurl -X POST http://127.0.0.1:8080/vault/initialize \\\n  -H "Content-Type: application/json" \\\n  -d \'{"userPubkey": "GXvyLzGdAaKqs7ZPgxD7ALT1Rveto4T2YbJTo3RCGv7M"}\'\n\n# 3. Deposit 100 USDT\ncurl -X POST http://127.0.0.1:8080/vault/deposit \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "userPubkey": "GXvyLzGdAaKqs7ZPgxD7ALT1Rveto4T2YbJTo3RCGv7M",\n    "amount": 100000000\n  }\'\n\n# 4. Check balance\ncurl http://127.0.0.1:8080/vault/balance/GXvyLzGdAaKqs7ZPgxD7ALT1Rveto4T2YbJTo3RCGv7M\n\n# 5. Withdraw 50 USDT\ncurl -X POST http://127.0.0.1:8080/vault/withdraw \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "userPubkey": "GXvyLzGdAaKqs7ZPgxD7ALT1Rveto4T2YbJTo3RCGv7M",\n    "amount": 50000000\n  }\'\n\n# 6. View transaction history\ncurl "http://127.0.0.1:8080/vault/transactions/GXvyLzGdAaKqs7ZPgxD7ALT1Rveto4T2YbJTo3RCGv7M"\n\n# 7. Check TVL\ncurl http://127.0.0.1:8080/vault/tvl\n'})}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"-important-notes",children:"\ud83d\udcdd Important Notes"}),"\n",(0,a.jsxs)(e.ol,{children:["\n",(0,a.jsxs)(e.li,{children:["\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"Amount Format"}),": All amounts are in smallest units (6 decimals for USDT)"]}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"1 USDT = 1,000,000"}),"\n",(0,a.jsx)(e.li,{children:"100 USDT = 100,000,000"}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(e.li,{children:["\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"Transaction Signing"}),": The API returns ",(0,a.jsx)(e.strong,{children:"unsigned transactions"}),". You must:"]}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"Sign them with your wallet"}),"\n",(0,a.jsx)(e.li,{children:"Submit them to Solana Devnet"}),"\n",(0,a.jsx)(e.li,{children:"The backend doesn't have access to your private keys (security!)"}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(e.li,{children:["\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"Wallet Address"}),": Replace ",(0,a.jsx)(e.code,{children:"YOUR_WALLET_ADDRESS"})," with your actual Solana wallet public key"]}),"\n"]}),"\n",(0,a.jsxs)(e.li,{children:["\n",(0,a.jsxs)(e.p,{children:[(0,a.jsx)(e.strong,{children:"Devnet"}),": Make sure you're using Solana Devnet and have test SOL/USDT"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"-view-on-solana-explorer",children:"\ud83d\udd0d View on Solana Explorer"}),"\n",(0,a.jsx)(e.p,{children:"After transactions are confirmed, view them on Solana Explorer:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:"https://explorer.solana.com/address/YOUR_WALLET_ADDRESS?cluster=devnet\n"})}),"\n",(0,a.jsxs)(e.p,{children:["Replace ",(0,a.jsx)(e.code,{children:"YOUR_WALLET_ADDRESS"})," with your wallet address."]}),"\n",(0,a.jsx)(e.hr,{}),"\n",(0,a.jsx)(e.h2,{id:"\ufe0f-troubleshooting",children:"\ud83d\udee0\ufe0f Troubleshooting"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:'Error: "Empty reply from server"'})}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"Backend might not be running"}),"\n",(0,a.jsxs)(e.li,{children:["Check: ",(0,a.jsx)(e.code,{children:"curl http://127.0.0.1:8080/health"})]}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:'Error: "Vault not found"'})}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:["Initialize the vault first using ",(0,a.jsx)(e.code,{children:"/vault/initialize"})]}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:'Error: "Insufficient balance"'})}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:["Check your balance: ",(0,a.jsx)(e.code,{children:"curl http://127.0.0.1:8080/vault/balance/YOUR_WALLET_ADDRESS"})]}),"\n",(0,a.jsx)(e.li,{children:"Make sure you have enough USDT in your vault"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"Transaction fails"})}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"Check Solana Devnet status"}),"\n",(0,a.jsx)(e.li,{children:"Verify you have enough SOL for transaction fees"}),"\n",(0,a.jsx)(e.li,{children:"Check transaction on Solana Explorer"}),"\n"]})]})}function h(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,a.jsx)(e,{...n,children:(0,a.jsx)(d,{...n})}):d(n)}},8453:(n,e,s)=>{s.d(e,{R:()=>l,x:()=>r});var t=s(6540);const a={},i=t.createContext(a);function l(n){const e=t.useContext(i);return t.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function r(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(a):n.components||a:l(n.components),t.createElement(i.Provider,{value:e},n.children)}}}]);