"use strict";(globalThis.webpackChunkmy_docs=globalThis.webpackChunkmy_docs||[]).push([[3549],{1194:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>l,contentTitle:()=>t,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"getting-started/KEYPAIR_SETUP_GUIDE","title":"Keypair Setup Guide for Position Manager & Liquidation Engine","description":"This guide explains how to create keypairs for the Position Manager and Liquidation Engine that will automatically sign lock/unlock/transfer transactions.","source":"@site/docs/getting-started/KEYPAIR_SETUP_GUIDE.md","sourceDirName":"getting-started","slug":"/getting-started/KEYPAIR_SETUP_GUIDE","permalink":"/GoQuant-Project/docs/getting-started/KEYPAIR_SETUP_GUIDE","draft":false,"unlisted":false,"editUrl":"https://github.com/sahilgoswami0901/GoQuant-Project/tree/main/docs/getting-started/KEYPAIR_SETUP_GUIDE.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"WebSocket Real-Time Updates Guide","permalink":"/GoQuant-Project/docs/backend/WEBSOCKET_GUIDE"},"next":{"title":"Understanding Program ID vs Deployer Wallet","permalink":"/GoQuant-Project/docs/getting-started/PROGRAM_ID_EXPLANATION"}}');var s=i(4848),o=i(8453);const r={},t="Keypair Setup Guide for Position Manager & Liquidation Engine",l={},d=[{value:"\ud83c\udfaf Overview",id:"-overview",level:2},{value:"\ud83d\udcdd Step 1: Create Position Manager Keypair",id:"-step-1-create-position-manager-keypair",level:2},{value:"\ud83d\udcdd Step 2: Create Liquidation Engine Keypair",id:"-step-2-create-liquidation-engine-keypair",level:2},{value:"\ud83d\udd10 Step 3: Fund the Keypairs (Devnet)",id:"-step-3-fund-the-keypairs-devnet",level:2},{value:"\u2705 Step 4: Verify Keypairs Exist",id:"-step-4-verify-keypairs-exist",level:2},{value:"\ud83d\ude80 Step 5: Use the Keypairs in API Calls",id:"-step-5-use-the-keypairs-in-api-calls",level:2},{value:"<strong>Lock Collateral (Position Manager)</strong>",id:"lock-collateral-position-manager",level:3},{value:"<strong>Unlock Collateral (Position Manager)</strong>",id:"unlock-collateral-position-manager",level:3},{value:"<strong>Transfer Collateral (Liquidation Engine)</strong>",id:"transfer-collateral-liquidation-engine",level:3},{value:"\ud83d\udd11 Step 6: Add to Authorized Programs (Important!)",id:"-step-6-add-to-authorized-programs-important",level:2},{value:"<strong>Get the Public Keys:</strong>",id:"get-the-public-keys",level:3},{value:"<strong>Add to Authorized Programs:</strong>",id:"add-to-authorized-programs",level:3},{value:"\ud83d\udcc1 File Locations",id:"-file-locations",level:2},{value:"\ud83d\udd12 Security Notes",id:"-security-notes",level:2},{value:"<strong>For Development/Testing:</strong>",id:"for-developmenttesting",level:3},{value:"<strong>For Production:</strong>",id:"for-production",level:3},{value:"\ud83e\uddea Quick Test",id:"-quick-test",level:2},{value:"\ud83d\udccb Summary",id:"-summary",level:2},{value:"\ud83c\udfaf Complete Example",id:"-complete-example",level:2}];function c(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.header,{children:(0,s.jsx)(e.h1,{id:"keypair-setup-guide-for-position-manager--liquidation-engine",children:"Keypair Setup Guide for Position Manager & Liquidation Engine"})}),"\n",(0,s.jsxs)(e.p,{children:["This guide explains how to create keypairs for the ",(0,s.jsx)(e.strong,{children:"Position Manager"})," and ",(0,s.jsx)(e.strong,{children:"Liquidation Engine"})," that will automatically sign lock/unlock/transfer transactions."]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"-overview",children:"\ud83c\udfaf Overview"}),"\n",(0,s.jsxs)(e.p,{children:["You need ",(0,s.jsx)(e.strong,{children:"two separate keypairs"}),":"]}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Position Manager Keypair"})," - Signs lock/unlock transactions"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Liquidation Engine Keypair"})," - Signs transfer transactions"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"These keypairs represent the authorized programs that can perform these operations."}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"-step-1-create-position-manager-keypair",children:"\ud83d\udcdd Step 1: Create Position Manager Keypair"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"# Create a new keypair for position manager\nsolana-keygen new \\\n  --outfile ~/.config/solana/position-manager.json \\\n  --no-bip39-passphrase\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Output:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"Generating a new keypair\n\nFor added security, enter a BIP39 passphrase\n\n\u26a0\ufe0f  WARNING: Do not use this keypair for mainnet funds!\n\npubkey: 7xKt9Fj2abc123...  <-- This is your Position Manager address\n"})}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Save the pubkey"})," - you'll need to add it to the authorized programs list later."]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"-step-2-create-liquidation-engine-keypair",children:"\ud83d\udcdd Step 2: Create Liquidation Engine Keypair"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"# Create a new keypair for liquidation engine\nsolana-keygen new \\\n  --outfile ~/.config/solana/liquidation-engine.json \\\n  --no-bip39-passphrase\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Output:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"Generating a new keypair\n\nFor added security, enter a BIP39 passphrase\n\n\u26a0\ufe0f  WARNING: Do not use this keypair for mainnet funds!\n\npubkey: 9Yht3Mkxyz789...  <-- This is your Liquidation Engine address\n"})}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Save the pubkey"})," - you'll need to add it to the authorized programs list later."]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"-step-3-fund-the-keypairs-devnet",children:"\ud83d\udd10 Step 3: Fund the Keypairs (Devnet)"}),"\n",(0,s.jsx)(e.p,{children:"These keypairs need SOL to pay for transaction fees:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"# Fund position manager\nsolana airdrop 1 ~/.config/solana/position-manager.json\n\n# Fund liquidation engine\nsolana airdrop 1 ~/.config/solana/liquidation-engine.json\n"})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Verify balances:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"solana balance ~/.config/solana/position-manager.json\nsolana balance ~/.config/solana/liquidation-engine.json\n"})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"-step-4-verify-keypairs-exist",children:"\u2705 Step 4: Verify Keypairs Exist"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"# Check position manager keypair\nls -la ~/.config/solana/position-manager.json\n\n# Check liquidation engine keypair\nls -la ~/.config/solana/liquidation-engine.json\n\n# View their public keys\nsolana address -k ~/.config/solana/position-manager.json\nsolana address -k ~/.config/solana/liquidation-engine.json\n"})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"-step-5-use-the-keypairs-in-api-calls",children:"\ud83d\ude80 Step 5: Use the Keypairs in API Calls"}),"\n",(0,s.jsx)(e.h3,{id:"lock-collateral-position-manager",children:(0,s.jsx)(e.strong,{children:"Lock Collateral (Position Manager)"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:'curl -X POST http://127.0.0.1:8080/vault/lock-collateral \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "userPubkey": "HjxQC5jmM8JQrKmVLz29fvaVU428BQ3NzM7a3uQECt9m",\n    "amount": 10000000,\n    "positionId": "pos_123",\n    "positionManagerKeypairPath": "~/.config/solana/position-manager.json"\n  }\'\n'})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Response:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-json",children:'{\n  "success": true,\n  "data": {\n    "transactionId": "...",\n    "status": "submitted",\n    "signature": "5Ht3Rjabc123...",\n    "message": "Transaction submitted successfully. Signature: 5Ht3Rjabc123..."\n  }\n}\n'})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h3,{id:"unlock-collateral-position-manager",children:(0,s.jsx)(e.strong,{children:"Unlock Collateral (Position Manager)"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:'curl -X POST http://127.0.0.1:8080/vault/unlock-collateral \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "userPubkey": "HjxQC5jmM8JQrKmVLz29fvaVU428BQ3NzM7a3uQECt9m",\n    "amount": 10000000,\n    "positionId": "pos_123",\n    "positionManagerKeypairPath": "~/.config/solana/position-manager.json"\n  }\'\n'})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h3,{id:"transfer-collateral-liquidation-engine",children:(0,s.jsx)(e.strong,{children:"Transfer Collateral (Liquidation Engine)"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:'curl -X POST http://127.0.0.1:8080/vault/transfer-collateral \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "fromPubkey": "HjxQC5jmM8JQrKmVLz29fvaVU428BQ3NzM7a3uQECt9m",\n    "toPubkey": "GXvyLzGdAaKqs7ZPgxD7ALT1Rveto4T2YbJTo3RCGv7M",\n    "amount": 50000000,\n    "reason": "settlement",\n    "liquidationEngineKeypairPath": "~/.config/solana/liquidation-engine.json"\n  }\'\n'})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"-step-6-add-to-authorized-programs-important",children:"\ud83d\udd11 Step 6: Add to Authorized Programs (Important!)"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Before these keypairs can actually work on-chain"}),", you need to add them to the ",(0,s.jsx)(e.code,{children:"VaultAuthority"}),"'s authorized programs list."]}),"\n",(0,s.jsx)(e.h3,{id:"get-the-public-keys",children:(0,s.jsx)(e.strong,{children:"Get the Public Keys:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:'# Position Manager pubkey\nPOSITION_MANAGER_PUBKEY=$(solana address -k ~/.config/solana/position-manager.json)\necho "Position Manager: $POSITION_MANAGER_PUBKEY"\n\n# Liquidation Engine pubkey\nLIQUIDATION_ENGINE_PUBKEY=$(solana address -k ~/.config/solana/liquidation-engine.json)\necho "Liquidation Engine: $LIQUIDATION_ENGINE_PUBKEY"\n'})}),"\n",(0,s.jsx)(e.h3,{id:"add-to-authorized-programs",children:(0,s.jsx)(e.strong,{children:"Add to Authorized Programs:"})}),"\n",(0,s.jsxs)(e.p,{children:["You'll need to call the ",(0,s.jsx)(e.code,{children:"add_authorized_program"})," instruction on your smart contract. This is typically done via:"]}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Anchor CLI"})," (if you have an admin script)"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"TypeScript/JavaScript"})," (using Anchor client)"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Direct Solana CLI"})," (building the instruction manually)"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Example TypeScript:"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-typescript",children:"// Add position manager to authorized programs\nawait program.methods\n  .addAuthorizedProgram(new PublicKey(POSITION_MANAGER_PUBKEY))\n  .accounts({\n    admin: adminKeypair.publicKey,\n    vaultAuthority: vaultAuthorityPda,\n  })\n  .rpc();\n\n// Add liquidation engine to authorized programs\nawait program.methods\n  .addAuthorizedProgram(new PublicKey(LIQUIDATION_ENGINE_PUBKEY))\n  .accounts({\n    admin: adminKeypair.publicKey,\n    vaultAuthority: vaultAuthorityPda,\n  })\n  .rpc();\n"})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"-file-locations",children:"\ud83d\udcc1 File Locations"}),"\n",(0,s.jsx)(e.p,{children:"After creating the keypairs, you'll have:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{children:"~/.config/solana/\n\u251c\u2500\u2500 id.json                    # Your main wallet (user operations)\n\u251c\u2500\u2500 position-manager.json      # Position manager keypair (lock/unlock)\n\u2514\u2500\u2500 liquidation-engine.json    # Liquidation engine keypair (transfers)\n"})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"-security-notes",children:"\ud83d\udd12 Security Notes"}),"\n",(0,s.jsx)(e.h3,{id:"for-developmenttesting",children:(0,s.jsx)(e.strong,{children:"For Development/Testing:"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u2705 It's fine to use these keypairs on devnet"}),"\n",(0,s.jsxs)(e.li,{children:["\u2705 Store them in ",(0,s.jsx)(e.code,{children:"~/.config/solana/"})," for easy access"]}),"\n",(0,s.jsxs)(e.li,{children:["\u2705 Use ",(0,s.jsx)(e.code,{children:"--no-bip39-passphrase"})," for automated signing"]}),"\n"]}),"\n",(0,s.jsx)(e.h3,{id:"for-production",children:(0,s.jsx)(e.strong,{children:"For Production:"})}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:["\u26a0\ufe0f ",(0,s.jsx)(e.strong,{children:"NEVER"})," commit keypair files to git"]}),"\n",(0,s.jsx)(e.li,{children:"\u26a0\ufe0f Use secure key management (HSM, hardware wallets, or secure vaults)"}),"\n",(0,s.jsx)(e.li,{children:"\u26a0\ufe0f Consider using PDAs (Program Derived Addresses) instead of keypairs"}),"\n",(0,s.jsx)(e.li,{children:"\u26a0\ufe0f Implement proper access controls and rate limiting"}),"\n"]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"-quick-test",children:"\ud83e\uddea Quick Test"}),"\n",(0,s.jsx)(e.p,{children:"After creating the keypairs, test them:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"# Test position manager can sign\nsolana balance -k ~/.config/solana/position-manager.json\n\n# Test liquidation engine can sign\nsolana balance -k ~/.config/solana/liquidation-engine.json\n"})}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"-summary",children:"\ud83d\udccb Summary"}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsxs)(e.li,{children:["\u2705 Create position manager keypair: ",(0,s.jsx)(e.code,{children:"~/.config/solana/position-manager.json"})]}),"\n",(0,s.jsxs)(e.li,{children:["\u2705 Create liquidation engine keypair: ",(0,s.jsx)(e.code,{children:"~/.config/solana/liquidation-engine.json"})]}),"\n",(0,s.jsx)(e.li,{children:"\u2705 Fund both keypairs with SOL (for transaction fees)"}),"\n",(0,s.jsxs)(e.li,{children:["\u2705 Add their pubkeys to ",(0,s.jsx)(e.code,{children:"VaultAuthority.authorized_programs"})," on-chain"]}),"\n",(0,s.jsxs)(e.li,{children:["\u2705 Use them in API calls with ",(0,s.jsx)(e.code,{children:"positionManagerKeypairPath"})," and ",(0,s.jsx)(e.code,{children:"liquidationEngineKeypairPath"})]}),"\n"]}),"\n",(0,s.jsx)(e.hr,{}),"\n",(0,s.jsx)(e.h2,{id:"-complete-example",children:"\ud83c\udfaf Complete Example"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:'# 1. Create keypairs\nsolana-keygen new --outfile ~/.config/solana/position-manager.json --no-bip39-passphrase\nsolana-keygen new --outfile ~/.config/solana/liquidation-engine.json --no-bip39-passphrase\n\n# 2. Fund them\nsolana airdrop 1 ~/.config/solana/position-manager.json\nsolana airdrop 1 ~/.config/solana/liquidation-engine.json\n\n# 3. Get their addresses\necho "Position Manager: $(solana address -k ~/.config/solana/position-manager.json)"\necho "Liquidation Engine: $(solana address -k ~/.config/solana/liquidation-engine.json)"\n\n# 4. Use in API calls\ncurl -X POST http://127.0.0.1:8080/vault/lock-collateral \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "userPubkey": "YOUR_USER_ADDRESS",\n    "amount": 10000000,\n    "positionId": "pos_123",\n    "positionManagerKeypairPath": "~/.config/solana/position-manager.json"\n  }\'\n'})}),"\n",(0,s.jsx)(e.p,{children:"That's it! Your keypairs are ready to use. \ud83d\ude80"})]})}function h(n={}){const{wrapper:e}={...(0,o.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(c,{...n})}):c(n)}},8453:(n,e,i)=>{i.d(e,{R:()=>r,x:()=>t});var a=i(6540);const s={},o=a.createContext(s);function r(n){const e=a.useContext(o);return a.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function t(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:r(n.components),a.createElement(o.Provider,{value:e},n.children)}}}]);